(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1389:function(e,t,o){e.exports=o.p+"img/exclusive.3903553.png"},1626:function(e,t,o){e.exports=o.p+"img/Rectangle.f298e95.png"},2e3:function(e,t,o){"use strict";var r=o(7),l=o(11),n=(o(300),o(30),o(49),o(23)),c=o.n(n),h=o(2427),d=o.n(h),m=o(2434),y=o.n(m),v=o(65),S=o.n(v),f=o(133),x=o.n(f),svg=o(1085),C=o.n(svg),w=o(1009),T=o(25),P=o(61),H=(o(45),o(29),o(31),o(339));var O=o(2436),k=o.n(O),z=o(2179),j={colorsinspo:{execute(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={tab:e.tab,colors:e.colors.map((e=>e.hex)),brandPaletteId:e.selectedPalette?e.selectedPalette.id:null},{palette:r}=t;"re-color"!==o.tab&&(e.tab="re-color");var l=Object(z.b)(e.colors.map((e=>e.originalHex)),r.colors);return e.colors.forEach(((t,o)=>{e["fill".concat(t.element,"Color")](e.colors[o].originalHex,l[o]),e.colors[o].hex=l[o],e.colors[o].lastHex=l[o]})),e.$store.dispatch("brandPalettes/setSelected",null),o},undo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.tab=t.tab,e.colors.forEach(((o,r)=>{e["fill".concat(o.element,"Color")](e.colors[r].originalHex,t.colors[r]),e.colors[r].hex=t.colors[r]})),e.$store.dispatch("brandPalettes/setSelected",t.brandPaletteId)}},brandPalette:{execute(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={brandPaletteId:e.selectedPalette?e.selectedPalette.id:null,colors:e.colors.map((e=>e.hex)),brandColorApplied:e.brandColorApplied},{palette:r}=t;e.$store.dispatch("brandPalettes/setSelected",r.id);var l=Object(z.b)(e.colors.map((e=>e.originalHex)),r.colors);return e.colors.forEach(((t,o)=>{e["fill".concat(t.element,"Color")](e.colors[o].originalHex,l[o]),e.colors[o].hex=l[o]})),e.brandColorApplied=!0,o},undo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.$store.dispatch("brandPalettes/setSelected",t.brandPaletteId),e.colors.forEach(((o,r)=>{e["fill".concat(o.element,"Color")](e.colors[r].originalHex,t.colors[r]),e.colors[r].hex=t.colors[r]})),e.brandColorApplied=t.brandColorApplied}},resetBrandPalette:{execute(e){var t={brandPaletteId:e.selectedPalette?e.selectedPalette.id:null,brandColorApplied:e.brandColorApplied},o=k()(e.history,(e=>"brandPalette"===e.command));if(o){var r=o.prevState.colors;e.colors.forEach(((t,o)=>{e["fill".concat(t.element,"Color")](e.colors[o].originalHex,r[o]),e.colors[o].hex=r[o]})),e.$store.dispatch("brandPalettes/setSelected",null),e.brandColorApplied=!1}return t},undo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e.$store.state.brandPalettes.palettes.find((e=>e.id===t.brandPaletteId));o&&e.execute({command:"brandPalette",state:{palette:o},options:{skipHistory:!0}})}},fillColor:{execute(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{color:o,index:r}=t,l={tab:e.tab,color:e.colors[r].hex,index:r,brandPaletteId:e.selectedPalette?e.selectedPalette.id:null};return e.tab="re-color",e["fill".concat(e.colors[r].element,"Color")](e.colors[r].originalHex,o.hex),e.colors[r].hex=o.hex,e.colors[r].lastHex=o.hex,e.$store.dispatch("brandPalettes/setSelected",null),l},undo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.tab=t.tab,e["fill".concat(e.colors[t.index].element,"Color")](e.colors[t.index].originalHex,t.color),e.colors[t.index].hex=t.color,e.colors[t.index].lastHex=t.color,e.$store.dispatch("brandPalettes/setSelected",t.brandPaletteId)}},tab:{execute(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={showTileTab:e.showTileTab,tab:e.tab,colors:e.colors.map((e=>e.hex)),brandPaletteId:e.brandColorApplied&&e.selectedPalette?e.selectedPalette.id:null},{tab:r}=t;if(e.showTileTab=!1,e.tab===r)e.tab=null;else switch(e.tab=r,r){case"re-color":if(o.brandPaletteId){var l=e.$store.state.brandPalettes.palettes.find((p=>p.id===o.brandPaletteId));l&&e.execute({command:"brandPalette",state:{palette:l},options:{skipHistory:!0}}),e.$store.dispatch("brandPalettes/setSelected",o.brandPaletteId)}else e.execute({command:"reColor",state:{colors:e.colors.map((e=>e.lastHex))},options:{skipHistory:!0}});break;case"monochrome":e.execute({command:"monochrome",state:{hue:e.monochromeHue,showCustomSaturation:e.showCustomSaturation,saturation:e.monochromeSaturation},options:{skipHistory:!0}});break;case"grayTone":e.execute({command:"grayTone",state:{hue:e.grayToneHue,saturation:e.grayToneSaturation},options:{skipHistory:!0}})}return o},undo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(e.showTileTab=t.showTileTab,e.tab=t.tab,e.tab){case"re-color":if(t.brandPaletteId){var o=e.$store.state.brandPalettes.palettes.find((p=>p.id===t.brandPaletteId));o&&e.execute({command:"brandPalette",state:{palette:o},options:{skipHistory:!0}}),e.$store.dispatch("brandPalettes/setSelected",t.brandPaletteId)}else e.execute({command:"reColor",state:{colors:t.colors},options:{skipHistory:!0}});break;case"monochrome":e.execute({command:"monochrome",state:{hue:e.monochromeHue,showCustomSaturation:e.showCustomSaturation,saturation:e.monochromeSaturation},options:{skipHistory:!0}});break;case"grayTone":e.execute({command:"grayTone",state:{hue:e.grayToneHue,saturation:e.grayToneSaturation},options:{skipHistory:!0}});break;case null:e.colors.forEach(((o,r)=>{e["fill".concat(o.element,"Color")](e.colors[r].originalHex,t.colors[r]),e.colors[r].hex=t.colors[r]}))}}},tileTab:{execute(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={tab:e.tab,showTileTab:e.showTileTab,tileType:e.tileType},{tab:r,showTileTab:l}=t;return e.tab=r,e.showTileTab=l,l&&"none"===e.tileType.name&&e.execute({command:"tileType",state:{tile:e.tile,tileType:e.tiles[1],tileBorderRadius:e.tileBorderRadius,iconSize:e.iconSize,tileSize:e.tileSize},options:{skipHistory:!0}}),o},undo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.tab=t.tab,e.showTileTab=t.showTileTab,e.execute({command:"tileType",state:{tile:e.tile,tileType:t.tileType,tileBorderRadius:e.tileBorderRadius,iconSize:e.iconSize,tileSize:e.tileSize},options:{skipHistory:!0}})}},reColor:{execute(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.colors.forEach(((o,r)=>{e["fill".concat(o.element,"Color")](e.colors[r].originalHex,t.colors[r]),e.colors[r].hex=t.colors[r],e.colors[r].lastHex=t.colors[r]})),e.selectedPalette&&e.$store.dispatch("brandPalettes/setSelected",e.selectedPalette.id)},undo(){}},monochrome:{execute(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{hue:o,showCustomSaturation:r,saturation:l}=t,n={brandPaletteId:e.selectedPalette?e.selectedPalette.id:null,colors:e.colors.map((e=>e.hex)),hue:e.monochromeHue,saturation:e.monochromeSaturation,showCustomSaturation:r};e.monochromeHue=o,e.showCustomSaturation=r,r&&(e.monochromeSaturation=l);var c=Object(z.a)(e.colors.map((e=>e.lastHex)),o,r?l:null);return e.colors.forEach(((t,o)=>{e["fill".concat(t.element,"Color")](e.colors[o].originalHex,c[o]),e.colors[o].hex=c[o]})),n},undo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.monochromeHue=t.hue,e.showCustomSaturation=t.showCustomSaturation,t.showCustomSaturation&&(e.monochromeSaturation=t.saturation),e.colors.forEach(((o,r)=>{e["fill".concat(o.element,"Color")](e.colors[r].originalHex,t.colors[r]),e.colors[r].hex=t.colors[r]})),e.$store.dispatch("brandPalettes/setSelected",t.brandPaletteId)}},toggleMonochromeSaturation:{execute(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={showCustomSaturation:e.showCustomSaturation},{showCustomSaturation:r}=t;return e.showCustomSaturation=!r,e.execute({command:"monochrome",state:{hue:e.monochromeHue,showCustomSaturation:e.showCustomSaturation,saturation:e.showCustomSaturation?e.monochromeSaturation:null},options:{skipHistory:!0}}),o},undo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.showCustomSaturation=t.showCustomSaturation,e.execute({command:"monochrome",state:{hue:e.monochromeHue,showCustomSaturation:e.showCustomSaturation,saturation:e.showCustomSaturation?e.monochromeSaturation:null},options:{skipHistory:!0}})}},grayTone:{execute(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={brandPaletteId:e.selectedPalette?e.selectedPalette.id:null,colors:e.colors.map((e=>e.hex)),hue:e.grayToneHue,saturation:e.grayToneSaturation},{hue:r,saturation:l}=t;e.grayToneHue=r,e.grayToneSaturation=l;var n=Object(z.a)(e.colors.map((e=>e.lastHex)),e.grayToneHue,e.grayToneSaturation);return e.colors.forEach(((t,o)=>{e["fill".concat(t.element,"Color")](e.colors[o].originalHex,n[o]),e.colors[o].hex=n[o]})),e.$store.dispatch("brandPalettes/setSelected",null),o},undo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.grayToneHue=t.hue,e.grayToneSaturation=t.saturation,e.colors.forEach(((o,r)=>{e["fill".concat(o.element,"Color")](e.colors[r].originalHex,t.colors[r]),e.colors[r].hex=t.colors[r]})),e.$store.dispatch("brandPalettes/setSelected",t.brandPaletteId)}},tileType:{execute(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={tile:e.tile,tileType:e.tileType,iconSize:e.iconSize,tileSize:e.tileSize,tileBorderRadius:e.tileBorderRadius},{tileType:r}=t;return I(e,t),e.execute({command:"iconSize",state:{scale:"none"===r.name?1:r.icon},options:{skipHistory:!0}}),o},undo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.tile&&e.tile.remove(),I(e,t),e.execute({command:"iconSize",state:{scale:"none"===t.tileType.name?1:t.iconSize},options:{skipHistory:!0}})}},iconSize:{execute(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={scale:e.iconSize},{scale:r}=t;return e.iconSize=Number(r),e.icon&&e.icon.transform({scale:r}),o},undo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.iconSize=t.scale,e.icon&&e.icon.transform({scale:t.scale})}},tileSize:{execute(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={scale:e.tileSize},{scale:r}=t;return e.tileSize=Number(r),e.tile&&e.tile.transform({scale:r}),o},undo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.tileSize=t.scale,e.tile&&e.tile.transform({scale:t.scale})}},tileBorderRadius:{execute(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={radius:e.tileBorderRadius},{radius:r}=t;return e.tileBorderRadius=r,$(e,{radius:r}),o},undo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.tileBorderRadius=t.radius,$(e,{radius:t.radius})}},tileColor:{execute(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={color:e.tileColor},{color:r}=t;return e.tileColor=r,e.tile&&e.tile.fill(r),o},undo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.tileColor=t.color,e.tile&&e.tile.fill(t.color)}}},I=(e,t)=>{var{tileType:o,tileSize:r}=t;switch(e.tile&&e.tile.remove(),e.tileType=o,o.name){case"none":e.tile=null;break;case"square":e.tile=e.draw.rect(e.canvasWidth,e.canvasHeight).radius(e.tileBorderRadius);break;case"squircle":var l=e.canvasWidth,n=l/2,c=l-5;e.tile=e.draw.path("M ".concat(n,",0 C ").concat(5,",0 0,").concat(5," 0,").concat(n," 0,").concat(c," ").concat(5,",").concat(l," ").concat(n,",").concat(l," ").concat(c,",").concat(l," ").concat(l,",").concat(c," ").concat(l,",").concat(n," ").concat(l,",").concat(5," ").concat(c,",0 ").concat(n,",0 Z"));break;case"circle":e.tile=e.draw.circle(e.canvasWidth,e.canvasHeight);break;case"beacon":e.tile=e.draw.group(),e.tile.circle(e.canvasWidth,e.canvasHeight),e.tile.rect(e.canvasWidth/2+e.tileBorderRadius,e.canvasHeight/2+e.tileBorderRadius).move(e.canvasWidth/2-e.tileBorderRadius,e.canvasHeight/2-e.tileBorderRadius).radius(e.tileBorderRadius)}e.tile&&e.tile.back(),e.execute({command:"tileSize",state:{scale:r},options:{skipHistory:!0}}),e.tile&&e.tile.back().fill(e.tileColor).transform({scale:e.tileSize})},$=(e,t)=>{var{radius:o}=t;if(e.tileType)if("square"===e.tileType.name)e.tile.radius(o);else if("beacon"===e.tileType.name){e.tile.select("rect").members[0].size(e.canvasWidth/2+o,e.canvasHeight/2+o).move(e.canvasWidth/2-o,e.canvasHeight/2-o).radius(o)}};function E(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,o)}return t}function B(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?E(Object(source),!0).forEach((function(t){Object(l.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):E(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var N,R,D,A={data:()=>({history:[],position:-1,holdState:null,disableTimeTravel:!1}),mounted(){window.addEventListener("keydown",this.keyEventHandler)},destroyed(){window.removeEventListener("keydown",this.keyEventHandler)},computed:{unDoable(){return!!(!this.disableTimeTravel&&this.history.length&&this.position>=0)},reDoable(){return!!(!this.disableTimeTravel&&this.history.length&&this.position<this.history.length-1)}},methods:{keyEventHandler(e){(e.ctrlKey||e.metaKey)&&"KeyZ"===e.code&&(e.preventDefault(),e.shiftKey?(this.reDoable&&this.$analytics.track("editor",{action:"redo",via:"keyboard"}),this.redo()):(this.unDoable&&this.$analytics.track("editor",{action:"undo",via:"keyboard"}),this.undo()))},set(e){this.position<this.history.length-1&&(this.history=this.history.slice(0,this.position+1)),this.history.push(e),this.history.length>40&&this.history.splice(1,1),this.position=this.history.length-1},setLazy:(N=function(e){this.position<this.history.length-1&&(this.history=this.history.slice(0,this.position+1));var t=this.holdState;return this.history.push(B(B({},e),{},{prevState:t})),this.history.length>40&&this.history.splice(1,1),this.position=this.history.length-1,this.holdState=null,Promise.resolve(t)},R=400,D=Object(H.debounce)(function(){var e=Object(r.a)((function*(e,t,o,r){try{e(yield N.bind(o)(...r))}catch(e){t(e)}}));return function(t,o,r,l){return e.apply(this,arguments)}}(),R),function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return new Promise(((e,o)=>{D(e,o,this,t)}))}),undo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.position>=0){var t=this.history[this.position];j[t.command].undo(this,t.prevState),e.silent||(this.position-=1)}},redo(){if(this.position<this.history.length-1){this.position+=1;var e=this.history[this.position];j[e.command].execute(this,e.state)}},execute(e){var t=this;return Object(r.a)((function*(){var{command:r,state:l={},options:n={}}=e;if(t.disableEditing){if(t.handleAuth())t.$modal.currentModal&&"modalEditorSubscribe"===t.$modal.currentModal.id||t.$modal.open({id:"modalEditorSubscribe",component:Promise.all([o.e(0),o.e(293)]).then(o.bind(null,3645)),options:{modalOnModal:!0}});else{var c=yield t.getSharableUrl();t.$router.replace({query:{redirect:c}})}return!1}return new Promise((e=>{var o=j[r].execute(t,l);n.skipHistory||(n.lazy?(t.holdState||(t.holdState=o),t.setLazy({command:r,state:l}).then((t=>{e({state:l,prevState:t})}))):(t.set({command:r,state:l,prevState:o}),e({state:l,prevState:o})))}))}))()},reset(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.position=-1,this.history=[],this.resetData(),this.$store.dispatch("brandPalettes/setSelected",null),this.$nextTick((()=>{e?this.initEditor(e):this.initSVG()}))}}};function W(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,o)}return t}function M(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?W(Object(source),!0).forEach((function(t){Object(l.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):W(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var G=["g","path","polyline","polygon","circle","rect","circle","ellipse"],L="fill",U="fill",K="data-name",V=["line","g","path","polygon","circle","rect","circle","ellipse"],_=["stop"],F="stroke",J="svgShape",Z={monochromeHue:200,monochromeSaturation:100,showCustomSaturation:!1,grayToneHue:200,grayToneSaturation:10,tileColor:"#87ddfd",tileBorderRadius:20,tileSize:.7916,iconSize:.4652,tab:null,showTileTab:!1};t.a={mixins:[P.a,A],data:()=>M({draw:null,colors:[],icon:null,tile:null,tileType:{name:"none"},original:null,originalContent:null,originalWidth:null,originalHeight:null,selectedColorIndex:null,showUploadOption:!0,tiles:[{name:"none",icon:1,shape:null},{name:"square",icon:.4652,shape:.7916},{name:"squircle",icon:.4652,shape:.7916},{name:"circle",icon:.4652,shape:.9167},{name:"beacon",icon:.4652,shape:.9167}]},Z),computed:{color:{get(){return null!==this.selectedColorIndex?this.colors[this.selectedColorIndex].hex:"#FFF"},set(e){this.execute({command:"fillColor",state:{color:e,index:this.selectedColorIndex},options:{lazy:!0}}).then((e=>{e&&this.$analytics.track("editor",{location:"item-colors",action:"edit-color",prevColor:e.prevState.color,editedColor:e.state.color.hex})}))}},selectedPalette(){return this.$store.getters["brandPalettes/selectedPalette"]},disableEditing(){return this.urlState&&this.urlState.isPremium&&!this.hasPremiumSubscription&&!this.isLoading}},methods:{init(e){var t=this;return Object(r.a)((function*(){t.showUploadOption=!1,t.isLoading="initNew";var o=null;try{o=yield c()(e,{withCredentials:!1})}catch(e){t.$analytics.track("error-log",{place:"editor",url:window.location.href,itemId:t.item?t.item.id:null});var title="This file is having issue. Please report us.";throw t.$root.$bvToast.toast(title,{title:title,variant:"danger",toaster:"b-toaster-bottom-center",solid:!1,noAutoHide:!1,bodyClass:"d-none"}),new Error(title)}t.originalContent=o.data;try{var data={content:o.data},r=yield c()("/faas/process-svg",{method:"POST",data:data,withCredentials:!1});t.original=r.data}catch(e){t.resetData();var l="This file is not supported.";throw t.$root.$bvToast.toast(l,{title:l,variant:"danger",toaster:"b-toaster-bottom-center",solid:!1,noAutoHide:!1,bodyClass:"d-none"}),new Error(l)}t.initSVG()}))()},initEditor(content){var e=this;return Object(r.a)((function*(){e.originalContent=content,e.isLoading="initNew",e.tab=null,e.showTileTab=!1,e.showUploadOption=!1;var data={content:content};try{var t=yield c()("/faas/process-svg",{method:"POST",data:data,withCredentials:!1});e.original=t.data,e.initSVG()}catch(t){e.resetData(),e.showUploadOption=!0;var title="This file is not supported.";e.$root.$bvToast.toast(title,{title:title,variant:"danger",toaster:"b-toaster-bottom-center",solid:!1,noAutoHide:!1,bodyClass:"d-none"})}}))()},initSVG(){var e=this;this.draw&&this.draw.remove(),this.draw=C()(this.id),this.draw.size(this.canvasWidth,this.canvasHeight),this.icon=this.draw.group();var t=this.icon.svg(this.original);if(this.originalWidth=t.get(0).attr("width"),this.originalHeight=t.get(0).attr("height"),this.icon.select("svg").size(this.canvasWidth,this.canvasHeight),this.tileType=this.tiles[0],this.draw.each((function(){if(t!==this){var data=this.attr(K);data&&this.attr(K,y()(data))}}),!0),e.colors=[],this.draw.select(G).each((function(){if(t!==this){var o=null;if(o=this.attr(U)&&"#000000"!==this.attr(U).trim()?this.attr(U):this.style(L)?this.style(L):"#000",d()(o)){this.style(L,null),this.attr(U,o);var r=e.generateClassName(o);this.addClass(r),this.addClass(J),-1===S()(e.colors,{originalHex:o})&&e.colors.push({hex:o,lastHex:o,originalHex:o,className:r,element:"Shape"}),this.click((function(){e.selectColor(o)}))}}}),!0),this.draw.select(V).each((function(){if(t!==this){var o=null;if(this.attr(F)&&"#000000"!==this.attr(F).trim()&&(o=this.attr(F)),d()(o)){var r=e.generateStrokeClassName(o);this.addClass(r),this.addClass("svgStroke"),-1===S()(e.colors,{originalHex:o,element:"Stroke"})&&e.colors.push({hex:o,lastHex:o,originalHex:o,className:r,element:"Stroke"})}}})),this.draw.select(_).each((function(){if(t!==this){var o;if(o=this.attr("stop-color"),d()(o)){this.style(L,null),this.attr("stop-color",o);var r=e.generateGradientClassName(o);this.addClass(r),this.addClass(J),-1===S()(e.colors,{originalHex:o,element:"StopColor"})&&e.colors.push({hex:o,lastHex:o,originalHex:o,className:r,element:"StopColor"})}}})),!this.colors.length)throw this.resetData(),this.showUploadOption=!0,new Error("This file is not supported.");S()(this.colors,{element:"StopColor"})>-1&&this.$analytics.track("editor",{type:"gradient",url:window.location.href,itemId:this.item?this.item.id:null}),this.initWithBrandColor&&this.selectedPalette&&!this.selectedPalette.is_default&&this.onApplyBrandPalette(this.selectedPalette),this.selectedColorIndex=0,this.tab="re-color",this.urlState&&(this.execute({command:"reColor",state:{colors:this.urlState.colors},options:{skipHistory:!0}}),this.monochromeHue=this.urlState.monochromeHue,this.monochromeSaturation=this.urlState.monochromeSaturation,this.showCustomSaturation=this.urlState.showCustomSaturation,this.grayToneHue=this.urlState.grayToneHue,this.grayToneSaturation=this.urlState.grayToneSaturation,this.tileColor=this.urlState.tileColor,this.tileBorderRadius=this.urlState.tileBorderRadius,this.tileSize=this.urlState.tileSize,this.iconSize=this.urlState.iconSize,this.tileType=this.urlState.tileType,this.urlState.tab&&this.execute({command:"tab",state:{tab:this.urlState.tab},options:{skipHistory:!0}}),this.tab=this.urlState.tab,this.showTileTab=this.urlState.showTileTab,this.execute({command:"tileType",state:{tile:this.tile,tileType:M(M({},this.urlState.tileType),{},{icon:this.urlState.iconSize}),tileBorderRadius:this.tileBorderRadius,iconSize:this.iconSize,tileSize:this.tileSize},options:{skipHistory:!0}}),this.urlState.downloadItem&&this.onDownload({format:this.urlState.downloadItem[0],size:this.urlState.downloadItem[1]})),this.isLoading=null},generateClassName:e=>"color"+e.replace(/[\W+]/g,""),generateStrokeClassName:e=>"colorStroke"+e.replace(/[\W+]/g,""),generateGradientClassName:e=>"stopColor"+e.replace(/[\W+]/g,""),fillShapeColor(e,t){this.draw.select("."+this.generateClassName(e)).fill(t)},fillStrokeColor(e,t){this.draw.select("."+this.generateStrokeClassName(e)).stroke(t)},fillStopColorColor(e,t){this.draw.select("."+this.generateGradientClassName(e)).attr({"stop-color":t})},selectColor(e){this.selectedColorIndex=S()(this.colors,{originalHex:e})},resetData(){x()(Z,((e,t)=>{this[t]=Z[t]}))},onChangeTab(e){this.execute({command:"tab",state:{tab:e}})},onToggleTileTab(){this.execute({command:"tileTab",state:{tab:null,showTileTab:!this.showTileTab}})},onChangeTileType(e){this.execute({command:"tileType",state:{tile:this.tile,tileType:e,tileBorderRadius:this.tileBorderRadius,iconSize:this.iconSize,tileSize:this.tileSize}})},onChangeTileSize(e){this.execute({command:"tileSize",state:{scale:Number(e)},options:{lazy:!0}}).then((e=>{e&&this.$analytics.track("editor",{location:"add-tile",action:"edit-tile-size",scale:e.state.scale})}))},onChangeTileBorderRadius(e){this.execute({command:"tileBorderRadius",state:{radius:Number(e)},options:{lazy:!0}}).then((e=>{e&&this.$analytics.track("editor",{location:"add-tile",action:"edit-border-radius",radius:e.state.radius})}))},onChangeTileColor(e){this.execute({command:"tileColor",state:{color:e.color},options:{lazy:!0}}).then((t=>{t&&this.$analytics.track("editor",{location:"add-tile",action:"edit-tile-color",color:t.state.color,via:e.via})}))},onChangeIconSize(e){this.execute({command:"iconSize",state:{scale:Number(e)},options:{lazy:!0}}).then((e=>{e&&this.$analytics.track("editor",{location:"add-tile",action:"edit-icon-size",scale:e.state.scale})}))},onChangeMonochromeHue(e){this.execute({command:"monochrome",state:{hue:Number(e.hue),showCustomSaturation:this.showCustomSaturation,saturation:this.monochromeSaturation},options:{lazy:!0}}).then((t=>{t&&this.$analytics.track("editor",{location:"monochrome",action:"edit-hue",hue:t.state.hue,via:e.via})}))},onToggleCustomSaturation(){this.execute({command:"toggleMonochromeSaturation",state:{showCustomSaturation:this.showCustomSaturation}})},onChangeMonochromeSaturation(e){this.execute({command:"monochrome",state:{hue:this.monochromeHue,showCustomSaturation:this.showCustomSaturation,saturation:Number(e)},options:{lazy:!0}}).then((e=>{e&&this.$analytics.track("editor",{location:"monochrome",action:"edit-saturation",saturation:e.state.saturation})}))},onChangeGrayToneHue(e){this.execute({command:"grayTone",state:{hue:Number(e.hue),saturation:this.grayToneSaturation},options:{lazy:!0}}).then((t=>{t&&this.$analytics.track("editor",{location:"grayTone",action:"edit-hue",hue:t.state.hue,via:e.via})}))},onChangeGrayToneSaturation(e){this.execute({command:"grayTone",state:{hue:this.grayToneHue,saturation:Number(e)},options:{lazy:!0}}).then((e=>{e&&this.$analytics.track("editor",{location:"grayTone",action:"edit-saturation",saturation:e.state.saturation})}))},onApplyBrandPalette(e){this.execute({command:"brandPalette",state:{palette:e}})},onResetBrandColors(){this.execute({command:"resetBrandPalette"})},onApplyColorsinspo(e){this.history.length&&"colorsinspo"===this.history[this.history.length-1].command&&this.history[this.history.length-1].state.palette.id===e.id||this.execute({command:"colorsinspo",state:{palette:e}})},download(e,t,o){var l=arguments,n=this;return Object(r.a)((function*(){var r=l.length>3&&void 0!==l[3]?l[3]:0,h=l.length>4&&void 0!==l[4]?l[4]:null,d=l.length>5&&void 0!==l[5]?l[5]:"icon",m=l.length>6&&void 0!==l[6]&&l[6];try{var y=Object(T.b)("/api/v2/icon-editor"),v=yield c.a.post(y,{xml:e,name:t,format:o,width:r,height:r,item_id:h,asset:d,source:"web"});if(n.item&&Object(w.a)(M({uuid:n.item.uuid,format:o,licenseId:n.item.license_id,size:r},n.$store.getters["brandPalettes/selectedPalette"]&&{brandPaletteId:n.$store.getters["brandPalettes/selectedPalette"].id})),m)return v.data.response.url;window.location.href=v.data.response.download_url}catch(e){console.log(e)}}))()}}}},2179:function(e,t,o){"use strict";o.d(t,"a",(function(){return c})),o.d(t,"b",(function(){return h}));var r=o(11);o(465),o(52),o(70),o(2438);function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,o)}return t}var n=o(1393),c=function(e,t){for(var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=[],i=0;i<e.length;i++){var l=n(e[i]).toHsl();l.h=Number(t),null!==o&&(l.s=Number(o)/100),r.push(n(l).toHexString())}return r},h=(e,t)=>{var o=e.map(((e,t)=>({hsl:n(e).toHsl(),index:t,isMostNearer:!1}))),r=t.map(((e,t)=>({hsl:n(e).toHsl(),index:t,fillColorIndexes:[]})));return o.forEach(((e,t)=>{var o=m(r.map((e=>e.hsl)),e.hsl);r[o.index].fillColorIndexes.push({index:t,distance:o.distance})})),r.forEach((e=>{e.fillColorIndexes=e.fillColorIndexes.sort(((a,b)=>a.distance-b.distance)),e.fillColorIndexes.length&&(o[e.fillColorIndexes[0].index].isMostNearer=!0)})),r.filter((e=>!e.fillColorIndexes.length)).forEach((e=>{var t=o.filter((e=>!e.isMostNearer));if(t.length){var l=m(t.map((e=>e.hex)),e.hex),n=t[l.index],c=o[n.index];r.filter((e=>e.fillColorIndexes.length)).forEach((e=>{e.fillColorIndexes.map((e=>e.index)).includes(c.index)&&(e.fillColorIndexes=e.fillColorIndexes.filter((e=>e.index!==c.index)))})),e.fillColorIndexes.push({index:c.index,distance:l.distance}),o[c.index].isMostNearer=!0}})),r.filter((e=>e.fillColorIndexes.length)).forEach((e=>{e.fillColorIndexes.forEach(((t,l)=>{o[t.index].hsl=0===l?e.hsl:d({paletteColors:r.map((e=>e.hsl)),paletteColor:e.hsl,fillColor:o[t.index].hsl})}))})),o.map((e=>n(e.hsl).toHexString()))},d=e=>{var{paletteColors:t,paletteColor:o,fillColor:n}=e,c=function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},n);if(1===o.l){var h=t.filter((e=>!(0===e.l||1===e.l||0===e.s)));if(h.length){var d=h[m(h,o).index];c.h=d.h}else c.s=0}else 0===o.s||0===o.l?c.s=0:c.h=o.h;return c},m=(e,t)=>{var o=e.map((e=>y({color1:t,color2:e}))),r=Math.min.apply(Math,o);return{distance:r,index:o.indexOf(r)}},y=e=>{var{color1:t,color2:o}=e,r=v(t),l=v(o);return Math.hypot(l.x-r.x,l.y-r.y,l.z-r.z)},v=e=>{var t=n(e).toRgb();return{x:t.r,y:t.g,z:t.b}}}}]);
//# sourceMappingURL=26e47df.modern.js.map